<div class="container-fluid dashboard-container">
    <!-- Header -->
    <div class="mb-4">
        <h2 class="fw-bold text-dark section-title mb-1">
            Find Trips
        </h2>
        <p class="text-muted mb-0">Browse available transport jobs and bid on high-value tours.</p>
    </div>

    <!-- Requests Grid -->
    <div class="row g-4">
        <div class="col-xl-6" *ngFor="let req of requests">
            <div class="card h-100 border-0 shadow-sm overflow-hidden job-card">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <span class="badge bg-primary">{{ req.serviceType }}</span>
                        <span class="badge bg-light text-dark border">{{ req.status }}</span>
                    </div>
                    <h5 class="fw-bold text-dark mb-2">{{ req.location }}</h5>
                    <p class="text-muted small mb-3">
                        <i class="bi bi-calendar me-1"></i> {{ req.dateNeeded }}
                    </p>
                    <div class="mt-auto pt-3 border-top d-flex justify-content-between align-items-center">
                        <div>
                            <span class="text-muted small d-block">Estimated Budget</span>
                            <span class="fw-bold text-success fs-5">PKR ~{{req.estimatedBudget | number}}</span>
                        </div>
                        <button class="btn btn-dark fw-bold px-4 py-2 rounded-3" (click)="openOfferModal(req)">
                            Bid Now
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Overlay -->
<div class="modal-overlay" *ngIf="selectedRequest" (click)="closeOfferModal()">
    <div class="modal-content-wrapper p-4" (click)="$event.stopPropagation()">

        <!-- Header -->
        <div class="d-flex justify-content-between align-items-start mb-4">
            <div>
                <h4 class="fw-bold text-dark mb-1">Place Your Bid</h4>
                <p class="text-muted small mb-0">{{selectedRequest.location}}</p>
            </div>
            <button class="btn btn-sm btn-light border-0 text-muted rounded-circle" (click)="closeOfferModal()">
                <i class="bi bi-x fs-4"></i>
            </button>
        </div>

        <!-- Inputs -->
        <div class="row g-3">
            <div class="col-12">
                <label class="form-label fw-bold text-dark small">Your Bid Amount (PKR)</label>
                <input type="number" class="form-control form-control-lg" [(ngModel)]="offerPrice"
                    placeholder="e.g. 45000">
            </div>
            <div class="col-12">
                <label class="form-label fw-bold text-dark small">Description / Vehicle Details</label>
                <textarea class="form-control" rows="3" [(ngModel)]="offerDescription"
                    placeholder="I have a 2024 Model Coaster with AC..."></textarea>
            </div>
        </div>

        <!-- Actions -->
        <div class="d-flex gap-3 mt-4">
            <button class="btn btn-outline-secondary w-100 fw-bold py-2 rounded-3" (click)="closeOfferModal()">
                Cancel
            </button>
            <button class="btn btn-teal w-100 fw-bold py-2 rounded-3 text-white" (click)="submitOffer()"
                [disabled]="!offerPrice">
                Submit Bid
            </button>
        </div>

    </div>
</div>